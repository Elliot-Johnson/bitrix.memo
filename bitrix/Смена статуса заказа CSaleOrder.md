# Смена статуса заказа в Bitrix
## Смена статуса в Bitrix в старых версиях (до 15.x)
if (CSaleOrder::StatusOrder($ORDER_ID, "F")){
    echo "Статус заказа изменён успешно!";
} else {
    echo "Не удалось изменить статус заказа!";
}

Перед тем как статус изменяется происходит вызов обработчика OnSaleBeforeOrder модуля интернет магазина, в котором так же можно выполнять различные манипуляции с данными. После смены статуса вызывается обработчик OnSaleStatusOrder модуля интернет-магазина. При смене статуса заказа так же генерируется почтовое событие, которое представляется в виде SALE_STATUS_CHANGED_<код статуса>, и отправляется письмо, если существует почтовый шаблон.  
В ином случае, срабатывает почтовое событие общее для всех статусов SALE_STATUS_CHANGED.   
Используя эти почтовые события можно отправлять письма с уведомлениями клиенту, а также операторам интернет-магазина.

## Смена статуса заказа в Bitrix D7

use Bitrix\Sale;  
В этой концепции заказ представляет из себя объект класса Bitrix\Sale\Order. Особенность использования класса в том, что для сохранения изменений необходимо вызывать метод save(). После этого все изменения в заказе будут сохранены в базе данных.  

// получаем объект существующего заказа  
$order = Sale\Order::load($ORDER_ID);  
 
// задаем значение для поля STATUS_ID - N (статус: принят)  
$order->setField('STATUS_ID', 'N');  
 
// сохраняем изменения  
$order->save();  

После создания экземпляра класса, используя метод setFields() можно менять значения различных полей заказа.  
В данном примере мы задает значение поля STATUS_ID. После чего вызываем метод save() который и сохраняет наши изменения в базе данных.  
Метод setFields() универсальный, через него можно менять такие параметры как вес (ORDER_WEIGHT), сумму заказа (PRICE), 
а так же другие поля которые вы можете посмотреть вызвав метод: $order->getAvailableFields().  
Таким образом можно манипулировать множеством данных заказа через один экземпляр класса.  
